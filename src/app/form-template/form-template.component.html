<header>

  <mat-toolbar>
  <span class="mat-accent">
    Template {{ category }}
  </span>
  </mat-toolbar>

</header>

<body>
  <div class="row">
    <div class="column">
      <ng-form [formGroup]="formGroup">
        <div *ngFor="let form_elem of fields">
          <div [ngSwitch]="form_elem.type">
            <div *ngSwitchCase="'textBox'">
              <mat-form-field>
                <input matInput type="text" placeholder="{{form_elem.label}}" formControlName="{{form_elem.label}}" name="{{form_elem.label}}"/>
              </mat-form-field>
            </div>
            <div *ngSwitchCase="'number'">
              <mat-form-field>
                <input matInput type="number" placeholder="{{form_elem.label}}" formControlName="{{form_elem.label}}" name="{{form_elem.label}}"/>
              </mat-form-field>
            </div>
            <div *ngSwitchCase="'date'">
              <mat-form-field>
                <input matInput type="date" placeholder="{{form_elem.label}}" formControlName="{{form_elem.label}}" name="{{form_elem.label}}"/>
              </mat-form-field>
            </div>
          </div>
        </div>
        <div formArrayName="list">
          <div *ngFor="let item of getControls(); let i = index">
            <div [formGroupName]="i">
              <mat-form-field>
                <textarea matInput formControlName="item" name="item" placeholder="List element"></textarea>
              </mat-form-field>
              <button mat-icon-button color="warn" aria-label="Remove/clear" (click)="removeOrClearList(i)" matTooltip="Remove">
                <mat-icon>highlight_off</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </ng-form>

      <button class="float-left" mat-icon-button color="primary" aria-label="Add"
              (click)="addItemFormGroup()" matTooltip="Add">
        <mat-icon>add_circle_outline</mat-icon>
      </button>



    </div>

    <div class="column">
      <span *ngIf="message"> {{ message }} </span>
      <input #file type="file" accept='image/*' (change)="preview(file.files)" />
      <img [src]="imgURL" width="auto" class="preview-image" *ngIf="imgURL">
    </div>
  </div>

  <div class="button-class">
    <table cellspacing="0"><tr>
      <td><button mat-flat-button color="warn" class="main-button" (click)="backHome()">Back</button></td>
      <td><button mat-flat-button color="primary" class="main-button" (click)="exportToBackend()">Export</button></td>
    </tr>
    </table>
  </div>

</body>
